{"version":3,"sources":["webpack:///C:/Users/Yiwei/Desktop/test/main.js","webpack:///C:/Users/Yiwei/Desktop/test/pages/post/components/upload.vue?2155","webpack:///C:/Users/Yiwei/Desktop/test/pages/post/components/upload.vue?a950","webpack:///C:/Users/Yiwei/Desktop/test/pages/post/components/upload.vue?35be","webpack:///C:/Users/Yiwei/Desktop/test/pages/post/components/upload.vue?a3d0","webpack:///C:/Users/Yiwei/Desktop/test/pages/post/components/upload.vue","webpack:///C:/Users/Yiwei/Desktop/test/pages/post/components/upload.vue?2e74","webpack:///C:/Users/Yiwei/Desktop/test/pages/post/components/upload.vue?74b8"],"names":["createPage","Page","timeInfo","require","components","HMmessages","loginBox","name","onLoad","pageInit","data","currentButtonIndex","classified","uploadimages","uploadingState","uploadingStateWord","videoSrcShot","compeleteUpload","uploadOversize","avatarUrl","nickName","openid","videoSrc","currentCategory","created","console","log","db","wx","cloud","database","categroy_p","collection","get","then","res","category","catch","err","methods","uni","clearStorage","setCurrentButton","i","c","uploadImage","chooseImage","count","sizeType","sourceType","success","push","tempFilePaths","deleteimage","splice","deleteVideo","reviewPicture","index","uploadVideo","showLoading","title","chooseVideo","maxDuration","duration","tempFilePath","thumbTempFilePath","hideLoading","getData","type","titledata","remindNoice","tipsdata","length","userinfo","m","show","icon","iconColor","background","users","message","$nextTick","$refs","jump_out","start","user_info","_openid","userdata","userImage","userimage","userVideo","uservideo","uploadAllData","uploadImageList","Promise","sucess","fail","forEach","img","slice","lastIndexOf","imageName","Date","now","Math","floor","random","uploadImageName","uploadFile","cloudPath","filePath","fileID","s","f","videoName","uploadVideoName","image","video","uploadTime","formatTime","add","detail","setTimeout","switchTab","url"],"mappings":"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","file":"pages/post/components/upload.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\nimport Vue from 'vue'\nimport Page from './pages/post/components/upload.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./upload.vue?vue&type=template&id=7527436b&\"\nvar renderjs\nimport script from \"./upload.vue?vue&type=script&lang=js&\"\nexport * from \"./upload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./upload.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"C:/Users/Yiwei/Desktop/test/pages/post/components/upload.vue\"\nexport default component.exports","export * from \"-!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./upload.vue?vue&type=template&id=7527436b&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.HMmessages = _vm.$refs.HMmessages\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./upload.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport HMmessages from \"@/components/HM-messages/HM-messages.vue\"//引入及时反馈组件\nimport {previewPicture} from '../../../js/post_function.js'\nimport loginBox from'../../../function/loginBox.vue'\n\nvar timeInfo = require('../../../js/getTime.js')\n//define database\nexport default{\n\tcomponents: {HMmessages,loginBox},\n\tname:'upload',\n\tonLoad(){\n\t\t\tthis.pageInit()\n\t},\n\tdata(){\n\t\treturn{\n\t\n\t\t\tcurrentButtonIndex:0,\n\t\t\tclassified:[],\n\t\t\tuploadimages:[],//上传图片数组\n\t\t\tuploadingState:false,//上传状态框\n\t\t\tuploadingStateWord:\"上传中\",\n\t\t\tvideoSrcShot:\"\",//上传视频的截图\n\t\t\tcompeleteUpload:false,//是否上传视频加载完成\n\t\t\tuploadOversize:false,//判断视频是否超过30秒\n\t\t\t//头像，昵称，时间，openid\n\t\t\tavatarUrl: \"\",\n\t\t\tnickName : \"\",\n\t\t\topenid:\"\",\n\t\t\tvideoSrc:\"\",//上传视频\n\t\t\tcurrentCategory:\"\",//分组\n\t\t}\n\t},\n\tcreated(){\n\t\tconsole.log(\"you in upload\")\n\t\tconst db = wx.cloud.database()\n\t\tconst categroy_p = db.collection(\"post_category\")\n\n\t\tcategroy_p.get()\n\t\t\t.then((res) => {\n\t\t\t\tconsole.log(res.data)\n\t\t\t\t\n\t\t\t\tthis.classified = res.data //you can define the name by uslef \n\t\t\t\tthis.currentCategory = res.data[0].category\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err)\n\t\t\t\t\n\t\t\t})\n\t\n\t\t\t\n\t\t\n\t},\n\tmethods:{\n\t\tpageInit(){\n\t\t\tuni.clearStorage();\n\t\t},\n\t\t//设置分类按键参数\n\t\tsetCurrentButton(i,c){\n\t\t\n\t\t\tthis.currentButtonIndex=i\n\t\t\tthis.currentCategory = c\n\t\t},\n\t\t//上传图片\n\t\tuploadImage(){\n\t\t\tconsole.log(\"you are in the upload\")\n\t\t\twx.chooseImage({\n\t\t\t\tcount:8,\n\t\t\t\tsizeType:['original','compressed'],//原件或者压缩\n\t\t\t\tsourceType:['album', 'camera'],\n\t\t\t\tsuccess: (res)=>{\n\t\t\t\t\t//做一个限制性调整\n\t\t\t\t\tthis.uploadimages.push(...res.tempFilePaths)//...能当foreach\n\t\t\t\t}\n\t\t\t})\n\t\t\t\n\t\t},\n\t\tdeleteimage(i){\n\t\t\tthis.uploadimages.splice(i,1);//splice will affect the original array but slice will not and the frist elemnt is position and second is the number of elemnt you want remove from the array\n\t\t},\n\t\tdeleteVideo(){\n\t\t\tthis.videoSrc=''\n\t\t\tthis.videoSrcShot=''\n\t\t\tthis.compeleteUpload=false\n\t\t},\n\t\t//预览图片\n\t\treviewPicture(index){//长按可以做什么后期还可以加滤镜\n\t\t\tconsole.log(\"you are in\" +index)\n\t\t\tpreviewPicture(index,this.uploadimages)\n\t\t\t.then((res)=>{\n\t\t\t\tconsole.log('预览成功')\n\t\t\t})\n\t\t\t.catch((err)=>{\n\t\t\t\tconsole.log(err)\n\t\t\t})\n\t\t\t\n\t\t},\n\t\t//upload video\n\t\tuploadVideo(){//上传限制30秒以后解决方式要不短视频要不超级压缩/或者延迟摄影形式（快进）\n\t\t\tuni.showLoading({\n\t\t\t\ttitle:'上传中'\n\t\t\t}),\n\t\t\tuni.chooseVideo({\n\t\t\t\tcount:1,\n\t\t\t\tsourceType:['camera','album'],\n\t\t\t\tmaxDuration:30,\n\t\t\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t})\n\t\t\t.then((res)=>{\n\t\t\t\tif(res[1].duration<31){\n\t\t\t\t\tthis.videoSrc= res[1].tempFilePath\n\t\t\t\t\tthis.videoSrcShot=res[1].thumbTempFilePath\n\t\t\t\t\tconsole.log(res[1].duration)\n\t\t\t\t\tthis.compeleteUpload=true\n\t\t\t\t\tthis.uploadOversize=false\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t}else{\n\t\t\t\t\tthis.uploadOversize=true\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t}\n\t\t\t\t\n\t\t\t})\n\t\t\t.catch((err)=>{\n\t\t\t\tconsole.log(err)\n\t\t\t\tuni.hideLoading()\n\t\t\t})\n\t\t},\n\t\t\t//上传所有data\t\n\t\tgetData(type){\n\t\t\tconsole.log(type)\n\t\t\tif(!this.titledata){\n\t\t\t\tthis.remindNoice('需要填写标题哦')\n\t\t\t}else if(!this.tipsdata){\n\t\t\t\tthis.remindNoice('分享自己的感受哦')\n\t\t\t}else if(this.uploadimages.length<1){\n\t\t\t\tthis.remindNoice('至少需要分享一张照片')\n\t\t\t}else{\n\t\t\t\tconsole.log('upload')\n\t\t\t\t//判断用户是否登陆\n\t\t\t\tthis.userinfo()\n\t\t\t\t\n\t\t\t\t\n\t\t\t}\n\t\t\tconsole.log(this.videoSrc)\n\t\t\tconsole.log(this.videoSrcShot)\n\t\t\t\n\t\t},\n\t\t\n\t\tremindNoice(m){\n\t\t\tthis.HMmessages.show(m,{icon:'remind',iconColor:'#fff',background:\"rgba(102,0,51,0.8)\"})\n\t\t},\n\t\t\n\t\t\n\t\t//判断用户是否登陆\n\t\tuserinfo(){\n\t\t\t//判断用户是否存在\n\t\t\t\n\t\t\t\n\t\t\tconst db=wx.cloud.database()\n\t\t\tconst users = db.collection('users')\n\t\t\tusers.get()\n\t\t\t.then((res)=>{\n\t\t\t\tconsole.log(res)\n\t\t\t\tif(res.data.length==0){\n\t\t\t\t\tconsole.log(\"未注册\")\n\t\t\t\t\tlet message =\"登陆后再操作\"\n\t\t\t\t\tthis.$nextTick(()=>{\n\t\t\t\t\t\tthis.$refs.jump_out.start(message)\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\tthis.uploadingState=true\n\t\t\t\t\tconsole.log('已注册')//得到用户资料\n\t\t\t\t\tlet user_info = res.data[0]\n\t\t\t\t\tthis.avatarUrl = user_info.avatarUrl\n\t\t\t\t\tthis.nickName = user_info.nickName\n\t\t\t\t\tthis.openid=user_info._openid\n\t\t\t\t\t//可以上传提交数据到数据库\n\t\t\t\t\tthis.userdata()\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err)=>{\n\t\t\t\tconsole.log(err)\n\t\t\t})\n\t\t},\n\t\t\n\t\tasync userdata(){//order 1,upload the image to cloud 2 upload the video to cloud 3. when we get all the link(image,video) back than upload\n\t\t\tlet userimage = await this.userImage()\n\t\t\tlet uservideo = await this.userVideo()\n\t\t\tconsole.log(uservideo)\n\t\t\t\n\t\t\tawait this.uploadAllData(userimage,uservideo)\n\t\t\t\n\t\t\t\n\t\t},\n\t\tuserImage(){\n\t\t\t\n\t\t\tvar uploadImageList=[];\n\t\t\t\n\t\t\treturn new Promise((sucess,fail)=>{\n\t\t\t\t//上传成功返回的图片放到array 里面,\n\t\t\t\tthis.uploadimages.forEach((img)=>{\n\t\t\t\t\t// random name for img\n\t\t\t\t\n\t\t\t\t\tlet type=img.slice(img.lastIndexOf(\".\"))\n\t\t\t\t\tlet imageName = Date.now()+'-'+Math.floor(Math.random(0,1)*10000000000000)\n\t\t\t\t\tlet uploadImageName = imageName+type\n\t\t\t\t\tconsole.log(uploadImageName)\n\t\t\t\t\twx.cloud.uploadFile({\n\t\t\t\t\t\tcloudPath:'user_Image/'+uploadImageName,\n\t\t\t\t\t\tfilePath:img\n\t\t\t\t\t})\n\t\t\t\t\t.then(res=>{\n\t\t\t\t\t\t//还需要清理缓存有可能数组上传中断但之前的数据还是已经在上面了所以需要做一个清理存储的东西，定期看下那些照片id没有被post然后删掉\n\t\t\t\t\t\tuploadImageList.push(res.fileID)\n\t\t\t\t\t\tif(uploadImageList.length==this.uploadimages.length){\n\t\t\t\t\t\t\tsucess(uploadImageList)\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err=>{\n\t\t\t\t\t\tconsole.log(err)\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\t\n\t\t\n\t\t\n\t\t//get the document type by store the let before the last \".\"you can check the testfile\n\t\t\n\t\t\n\t\tuserVideo(){\n\t\t\treturn new Promise((s,f)=>{\n\t\t\t\tif(this.videoSrc==\"\"){\n\t\t\t\t\tconsole.log(\"用户不上传\")\n\t\t\t\t\ts('')\n\t\t\t\t}else{\n\t\t\t\t\t\n\t\t\t\t\tlet type=this.videoSrc.slice(this.videoSrc.lastIndexOf(\".\"))\n\t\t\t\t\tlet videoName = Date.now()+'-'+Math.floor(Math.random(0,1)*10000000000000)\n\t\t\t\t\tlet uploadVideoName = videoName+type\n\t\t\t\t\t\n\t\t\t\t\twx.cloud.uploadFile({\n\t\t\t\t\t\tcloudPath:'user_Video/'+uploadVideoName,\n\t\t\t\t\t\tfilePath:this.videoSrc\n\t\t\t\t\t})\n\t\t\t\t\t.then(res=>{\n\t\t\t\t\t\t//还需要清理缓存有可能数组上传中断但之前的数据还是已经在上面了所以需要做一个清理存储的东西，定期看下那些照片id没有被post然后删掉\n\t\t\t\t\t\tconsole.log('视频上传完毕')\n\t\t\t\t\t\ts(res.fileID)\n\t\t\t\t\t\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err=>{\n\t\t\t\t\t\tconsole.log(err)\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t})\n\t\t},\n\t\t\n\t\tuploadAllData(image,video){\n\t\t\tlet data = {\n\t\t\t\tcategory:this.currentCategory,\n\t\t\t\ttitledata:this.titledata,\n\t\t\t\ttipsdata:this.tipsdata,\n\t\t\t\timage:image,\n\t\t\t\tvideoSrc:video,\n\t\t\t\tavatarUrl:this.avatarUrl,\n\t\t\t\tnickName:this.nickName,\n\t\t\t\topenid:this.openid,\n\t\t\t\tuploadTime:timeInfo.formatTime(new Date()),\n\t\t\t\t\n\t\t\t}\n\t\t\tconst db = wx.cloud.database()\n\t\t\tconst users = db.collection(\"users\")\n\t\t\t\n\t\t\tdb.collection('post_info').add({\n\t\t\t\tdata:{\n\t\t\t\t\tdetail:data\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then((res)=>{\n\t\t\t\tconsole.log(res)\n\t\t\t\t//notice user post success \n\t\t\t\tthis.uploadingStateWord = \"上传完成跳转中\"\n\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\tthis.uploadingState=false\n\t\t\t\t\tthis.uploadingStateWord = \"uploading\"\n\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\turl:'../../index/index'\n\t\t\t\t\t})\n\t\t\t\t},1700)\n\t\t\t\t\n\t\t\t\t\n\t\t\t})\n\t\t\t.catch((err)=>{\n\t\t\t\tconsole.log(err)\n\t\t\t})\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t}\n}\n","import mod from \"-!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./upload.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!K:\\\\study\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./upload.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1589493163508\n      var cssReload = require(\"K:/study/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}